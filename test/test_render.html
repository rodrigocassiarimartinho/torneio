<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Teste de Renderização da Chave (4.0)</title>
    <link rel="stylesheet" href="../css/style.css">
    <style> body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; padding: 2rem; color: #333; } h1, h2 { text-align: center; } </style>
</head>
<body>
    <h1>Validação Completa do Módulo de Renderização</h1>
    
    <div id="app-container-double" style="display: block; margin-bottom: 4rem;">
        <main class="main-content">
            <div class="brackets-column">
                <div id="winners-bracket-container">
                    <h2>Chave Dupla - Vencedores</h2>
                    <div class="bracket-wrapper">
                        <svg class="connector-svg"></svg>
                        <div id="winners-bracket-matches" class="bracket-matches"></div>
                    </div>
                </div>
                <div id="losers-bracket-container">
                    <h2>Chave Dupla - Perdedores</h2>
                     <div class="bracket-wrapper">
                        <svg class="connector-svg"></svg>
                        <div id="losers-bracket-matches" class="bracket-matches"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <hr>

    <div id="app-container-single" style="display: block; margin-top: 2rem;">
        <main class="main-content">
            <div class="brackets-column">
                <div id="single-bracket-container">
                    <h2>Chave Simples</h2>
                    <div class="bracket-wrapper">
                        <svg class="connector-svg"></svg>
                        <div id="single-bracket-matches" class="bracket-matches"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>


    <script type="module">
        import { buildSingleBracketStructure } from '../js/structures/single_bracket_structure.js';
        import { buildDoubleBracketStructure } from '../js/structures/double_bracket_structure.js';
        import { populateSingleBracket } from '../js/logic/single_player_logic.js';
        import { populateDoubleBracket } from '../js/logic/double_player_logic.js';
        import { renderBracket } from '../js/bracket_render.js';
        import { parsePlayerInput } from '../js/parsing.js';

        // --- DADOS DE TESTE ---
        const playerList = Array.from({length: 8}, (_, i) => `${i+1}. S${i+1}`).join('\n') + '\n' + Array.from({length: 8}, (_, i) => `P${i+9}`).join('\n');
        const playerCount = 16;

        // --- TESTE DUPLA ELIMINAÇÃO ---
        const emptyDouble = buildDoubleBracketStructure(playerCount);
        const populatedDouble = populateDoubleBracket(emptyDouble, playerList);
        renderBracket(populatedDouble.winnersBracket, '#winners-bracket-matches');
        renderBracket(populatedDouble.losersBracket, '#losers-bracket-matches');

        // --- TESTE ELIMINAÇÃO SIMPLES ---
        const emptySingle = buildSingleBracketStructure(playerCount);
        const populatedSingle = populateSingleBracket(emptySingle, playerList);
        renderBracket(populatedSingle.rounds, '#single-bracket-matches');

    </script>
</body>
</html>
